!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){var n=/\+/g;function t(e){return i.raw?e:encodeURIComponent(e)}function o(e){return t(i.json?JSON.stringify(e):String(e))}function r(t,o){var r=i.raw?t:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(n," ")),i.json?JSON.parse(e):e}catch(e){}}(t);return e.isFunction(o)?o(r):r}var i=e.cookie=function(n,s,a){if(arguments.length>1&&!e.isFunction(s)){if("number"==typeof(a=e.extend({},i.defaults,a)).expires){var c=a.expires,d=a.expires=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*c)}return document.cookie=[t(n),"=",o(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var l,u=n?void 0:{},m=document.cookie?document.cookie.split("; "):[],f=0,p=m.length;f<p;f++){var y=m[f].split("="),v=(l=y.shift(),i.raw?l:decodeURIComponent(l)),h=y.join("=");if(n===v){u=r(h,s);break}n||void 0===(h=r(h))||(u[v]=h)}return u};i.defaults={},e.removeCookie=function(n,t){return e.cookie(n,"",e.extend({},t,{expires:-1})),!e.cookie(n)}}),function(){var e,n,t,o,r,i,s;if(e=document.getElementsByTagName("body"),(n=document.getElementById("site-navigation"))&&void 0!==(t=n.getElementsByTagName("button")[0]))if(void 0!==(o=n.getElementsByClassName("nav-inner")[0])){for(o.setAttribute("aria-expanded","false"),-1===o.className.indexOf("nav-menu")&&(o.className+=" nav-menu"),t.onclick=function(){-1!==n.className.indexOf("toggled")?(e[0].classList.contains("menu-open")&&e[0].classList.remove("menu-open"),n.className=n.className.replace(" toggled",""),t.setAttribute("aria-expanded","false"),o.setAttribute("aria-expanded","false")):(e[0].classList.add("menu-open"),n.className+=" toggled",t.setAttribute("aria-expanded","true"),o.setAttribute("aria-expanded","true"))},i=0,s=(r=o.getElementsByTagName("a")).length;i<s;i++)r[i].addEventListener("focus",a,!0),r[i].addEventListener("blur",a,!0);!function(e){var n,t,o=e.querySelectorAll(".menu-item-has-children > a, .page_item_has_children > a");if("ontouchstart"in window)for(n=function(e){var n,t=this.parentNode;if(t.classList.contains("focus"))t.classList.remove("focus");else{for(e.preventDefault(),n=0;n<t.parentNode.children.length;++n)t!==t.parentNode.children[n]&&t.parentNode.children[n].classList.remove("focus");t.classList.add("focus")}},t=0;t<o.length;++t)o[t].addEventListener("touchstart",n,!1)}(n)}else t.style.display="none";function a(){for(var e=this;-1===e.className.indexOf("nav-menu");)"li"===e.tagName.toLowerCase()&&(-1!==e.className.indexOf("focus")?e.className=e.className.replace(" focus",""):e.className+=" focus"),e=e.parentElement}}(),jQuery(document).ready(function(e){var n=0;currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),n=currentScrollPosition,e(window).scroll(function(){currentScrollPosition=e(window).scrollTop(),currentScrollPosition>120?e("body").addClass("sticky-menu"):e("body").removeClass("sticky-menu"),currentScrollPosition>n?(jQuery("body").removeClass("scroll-up"),jQuery("body").addClass("scroll-down")):(jQuery("body").removeClass("scroll-down"),jQuery("body").addClass("scroll-up")),n=currentScrollPosition})}),/(trident|msie)/i.test(navigator.userAgent)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,n=location.hash.substring(1);/^[A-z0-9_-]+$/.test(n)&&(e=document.getElementById(n))&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus())},!1),jQuery(document).ready(function(e){location.hash&&(location.href=location.hash),"hidden"!=jQuery.cookie("hidecookie")&&e("#cookiebanner").removeClass("hidden"),"hidden"!=jQuery.cookie("hidepopup")&&e("#popup").removeClass("hidden"),e("#cookiebanner button").click(function(n){var t=new Date;t.setTime(t.getTime()+31104e6),document.cookie="hidecookie=hidden; expires="+t.toGMTString(),e("#cookiebanner").addClass("hidden")})}),jQuery(".menu-anchor a").click(function(){event.preventDefault();var e=jQuery(this).attr("href");jQuery("#site-navigation").removeClass("toggled"),jQuery("body").removeClass("menu-toggled"),jQuery([document.documentElement,document.body]).animate({scrollTop:jQuery(e).offset().top},500).delay(200)}),jQuery(".check-reservation").click(function(){event.preventDefault(),jQuery("#check-reservation").prop("checked",!0),jQuery("#check-message").prop("checked",!1),jQuery(".form-field.your-reservation").addClass("active")}),jQuery(".check-message").click(function(){event.preventDefault(),jQuery("#check-reservation").prop("checked",!1),jQuery("#check-message").prop("checked",!0),jQuery(".form-field.your-reservation").removeClass("active")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5jb29raWUuanMiLCJuYXZpZ2F0aW9uLmpzIiwic3RpY2t5LW1lbnUuanMiLCJza2lwLWxpbmstZm9jdXMtZml4LmpzIiwibWFpbi5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwiZGVmaW5lIiwiYW1kIiwiZXhwb3J0cyIsIm1vZHVsZSIsInJlcXVpcmUiLCJqUXVlcnkiLCIkIiwicGx1c2VzIiwiZW5jb2RlIiwicyIsImNvbmZpZyIsInJhdyIsImVuY29kZVVSSUNvbXBvbmVudCIsInN0cmluZ2lmeUNvb2tpZVZhbHVlIiwidmFsdWUiLCJqc29uIiwiSlNPTiIsInN0cmluZ2lmeSIsIlN0cmluZyIsInJlYWQiLCJjb252ZXJ0ZXIiLCJpbmRleE9mIiwic2xpY2UiLCJyZXBsYWNlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwicGFyc2UiLCJlIiwicGFyc2VDb29raWVWYWx1ZSIsImlzRnVuY3Rpb24iLCJjb29raWUiLCJrZXkiLCJvcHRpb25zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJleHBpcmVzIiwiZGF5cyIsInQiLCJEYXRlIiwic2V0TWlsbGlzZWNvbmRzIiwiZ2V0TWlsbGlzZWNvbmRzIiwiZG9jdW1lbnQiLCJ0b1VUQ1N0cmluZyIsInBhdGgiLCJkb21haW4iLCJzZWN1cmUiLCJqb2luIiwicmVzdWx0IiwidW5kZWZpbmVkIiwiY29va2llcyIsInNwbGl0IiwiaSIsImwiLCJwYXJ0cyIsIm5hbWUiLCJzaGlmdCIsInJlbW92ZUNvb2tpZSIsInBhZ2VCb2R5IiwiY29udGFpbmVyIiwiYnV0dG9uIiwibWVudSIsImxpbmtzIiwibGVuIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjbGFzc05hbWUiLCJvbmNsaWNrIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJyZW1vdmUiLCJhZGQiLCJhZGRFdmVudExpc3RlbmVyIiwidG9nZ2xlRm9jdXMiLCJ0b3VjaFN0YXJ0Rm4iLCJwYXJlbnRMaW5rIiwicXVlcnlTZWxlY3RvckFsbCIsIndpbmRvdyIsIm1lbnVJdGVtIiwidGhpcyIsInBhcmVudE5vZGUiLCJwcmV2ZW50RGVmYXVsdCIsImNoaWxkcmVuIiwic3R5bGUiLCJkaXNwbGF5Iiwic2VsZiIsInRhZ05hbWUiLCJ0b0xvd2VyQ2FzZSIsInBhcmVudEVsZW1lbnQiLCJyZWFkeSIsImxhc3RTY3JvbGxQb3NpdGlvbiIsImN1cnJlbnRTY3JvbGxQb3NpdGlvbiIsInNjcm9sbFRvcCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzY3JvbGwiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiZWxlbWVudCIsImlkIiwibG9jYXRpb24iLCJoYXNoIiwic3Vic3RyaW5nIiwidGFiSW5kZXgiLCJmb2N1cyIsImhyZWYiLCJjbGljayIsImV2ZW50IiwiZGF0ZSIsInNldFRpbWUiLCJnZXRUaW1lIiwidG9HTVRTdHJpbmciLCJhdHRyIiwiZG9jdW1lbnRFbGVtZW50IiwiYm9keSIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJkZWxheSIsInByb3AiXSwibWFwcGluZ3MiOiJDQU9DLFNBQVVBLEdBQ1ksbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUUxQ0QsT0FBTyxDQUFDLFVBQVdELEdBQ1UsaUJBQVpHLFFBRWpCQyxPQUFPRCxRQUFVSCxFQUFRSyxRQUFRLFdBR2pDTCxFQUFRTSxRQVRWLENBV0UsU0FBVUMsR0FFWCxJQUFJQyxFQUFTLE1BRWIsU0FBU0MsRUFBT0MsR0FDZixPQUFPQyxFQUFPQyxJQUFNRixFQUFJRyxtQkFBbUJILEdBTzVDLFNBQVNJLEVBQXFCQyxHQUM3QixPQUFPTixFQUFPRSxFQUFPSyxLQUFPQyxLQUFLQyxVQUFVSCxHQUFTSSxPQUFPSixJQWtCNUQsU0FBU0ssRUFBS1YsRUFBR1csR0FDaEIsSUFBSU4sRUFBUUosRUFBT0MsSUFBTUYsRUFoQjFCLFNBQTBCQSxHQUNGLElBQW5CQSxF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a0YsRUFBS0csY0FFdEU1RyxFQUFFLGlCQUFpQnlGLFNBQVMsY0FNbEMxRixPQUFPLGtCQUFrQndHLE1BQU0sV0FDM0JDLE1BQU0zQixpQkFDTixJQUFJSCxFQUFXM0UsT0FBTzRFLE1BQU1rQyxLQUFLLFFBRWpDOUcsT0FBTyxvQkFBb0IyRixZQUFZLFdBQ3ZDM0YsT0FBTyxRQUFRMkYsWUFBWSxnQkFFM0IzRixPQUFPLENBQUNxQyxTQUFTMEUsZ0JBQWlCMUUsU0FBUzJFLE9BQU9DLFFBQVEsQ0FDdER4QixVQUFXekYsT0FBTzJFLEdBQVV1QyxTQUFTQyxLQUN0QyxLQUFLQyxNQUFNLE9BR2xCcEgsT0FBTyxzQkFBc0J3RyxNQUFNLFdBQy9CQyxNQUFNM0IsaUJBQ045RSxPQUFPLHNCQUFzQnFILEtBQU0sV0FBVyxHQUM5Q3JILE9BQU8sa0JBQWtCcUgsS0FBTSxXQUFXLEdBQzFDckgsT0FBTyxnQ0FBZ0MwRixTQUFTLFlBR3BEMUYsT0FBTyxrQkFBa0J3RyxNQUFNLFdBQzNCQyxNQUFNM0IsaUJBQ045RSxPQUFPLHNCQUFzQnFILEtBQU0sV0FBVyxHQUM5Q3JILE9BQU8sa0JBQWtCcUgsS0FBTSxXQUFXLEdBQzFDckgsT0FBTyxnQ0FBZ0MyRixZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBqUXVlcnkgQ29va2llIFBsdWdpbiB2MS40LjFcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9jYXJoYXJ0bC9qcXVlcnktY29va2llXG4gKlxuICogQ29weXJpZ2h0IDIwMDYsIDIwMTQgS2xhdXMgSGFydGxcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICovXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcblx0aWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuXHRcdC8vIEFNRCAoUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZSlcblx0XHRkZWZpbmUoWydqcXVlcnknXSwgZmFjdG9yeSk7XG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG5cdFx0Ly8gTm9kZS9Db21tb25KU1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKCdqcXVlcnknKSk7XG5cdH0gZWxzZSB7XG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXG5cdFx0ZmFjdG9yeShqUXVlcnkpO1xuXHR9XG59KGZ1bmN0aW9uICgkKSB7XG5cblx0dmFyIHBsdXNlcyA9IC9cXCsvZztcblxuXHRmdW5jdGlvbiBlbmNvZGUocykge1xuXHRcdHJldHVybiBjb25maWcucmF3ID8gcyA6IGVuY29kZVVSSUNvbXBvbmVudChzKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRlY29kZShzKSB7XG5cdFx0cmV0dXJuIGNvbmZpZy5yYXcgPyBzIDogZGVjb2RlVVJJQ29tcG9uZW50KHMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gc3RyaW5naWZ5Q29va2llVmFsdWUodmFsdWUpIHtcblx0XHRyZXR1cm4gZW5jb2RlKGNvbmZpZy5qc29uID8gSlNPTi5zdHJpbmdpZnkodmFsdWUpIDogU3RyaW5nKHZhbHVlKSk7XG5cdH1cblxuXHRmdW5jdGlvbiBwYXJzZUNvb2tpZVZhbHVlKHMpIHtcblx0XHRpZiAocy5pbmRleE9mKCdcIicpID09PSAwKSB7XG5cdFx0XHQvLyBUaGlzIGlzIGEgcXVvdGVkIGNvb2tpZSBhcyBhY2NvcmRpbmcgdG8gUkZDMjA2OCwgdW5lc2NhcGUuLi5cblx0XHRcdHMgPSBzLnNsaWNlKDEsIC0xKS5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykucmVwbGFjZSgvXFxcXFxcXFwvZywgJ1xcXFwnKTtcblx0XHR9XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gUmVwbGFjZSBzZXJ2ZXItc2lkZSB3cml0dGVuIHBsdXNlcyB3aXRoIHNwYWNlcy5cblx0XHRcdC8vIElmIHdlIGNhbid0IGRlY29kZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuXG5cdFx0XHQvLyBJZiB3ZSBjYW4ndCBwYXJzZSB0aGUgY29va2llLCBpZ25vcmUgaXQsIGl0J3MgdW51c2FibGUuXG5cdFx0XHRzID0gZGVjb2RlVVJJQ29tcG9uZW50KHMucmVwbGFjZShwbHVzZXMsICcgJykpO1xuXHRcdFx0cmV0dXJuIGNvbmZpZy5qc29uID8gSlNPTi5wYXJzZShzKSA6IHM7XG5cdFx0fSBjYXRjaChlKSB7fVxuXHR9XG5cblx0ZnVuY3Rpb24gcmVhZChzLCBjb252ZXJ0ZXIpIHtcblx0XHR2YXIgdmFsdWUgPSBjb25maWcucmF3ID8gcyA6IHBhcnNlQ29va2llVmFsdWUocyk7XG5cdFx0cmV0dXJuICQuaXNGdW5jdGlvbihjb252ZXJ0ZXIpID8gY29udmVydGVyKHZhbHVlKSA6IHZhbHVlO1xuXHR9XG5cblx0dmFyIGNvbmZpZyA9ICQuY29va2llID0gZnVuY3Rpb24gKGtleSwgdmFsdWUsIG9wdGlvbnMpIHtcblxuXHRcdC8vIFdyaXRlXG5cblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgISQuaXNGdW5jdGlvbih2YWx1ZSkpIHtcblx0XHRcdG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgY29uZmlnLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuXHRcdFx0aWYgKHR5cGVvZiBvcHRpb25zLmV4cGlyZXMgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdHZhciBkYXlzID0gb3B0aW9ucy5leHBpcmVzLCB0ID0gb3B0aW9ucy5leHBpcmVzID0gbmV3IERhdGUoKTtcblx0XHRcdFx0dC5zZXRNaWxsaXNlY29uZHModC5nZXRNaWxsaXNlY29uZHMoKSArIGRheXMgKiA4NjRlKzUpO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gKGRvY3VtZW50LmNvb2tpZSA9IFtcblx0XHRcdFx0ZW5jb2RlKGtleSksICc9Jywgc3RyaW5naWZ5Q29va2llVmFsdWUodmFsdWUpLFxuXHRcdFx0XHRvcHRpb25zLmV4cGlyZXMgPyAnOyBleHBpcmVzPScgKyBvcHRpb25zLmV4cGlyZXMudG9VVENTdHJpbmcoKSA6ICcnLCAvLyB1c2UgZXhwaXJlcyBhdHRyaWJ1dGUsIG1heC1hZ2UgaXMgbm90IHN1cHBvcnRlZCBieSBJRVxuXHRcdFx0XHRvcHRpb25zLnBhdGggICAgPyAnOyBwYXRoPScgKyBvcHRpb25zLnBhdGggOiAnJyxcblx0XHRcdFx0b3B0aW9ucy5kb21haW4gID8gJzsgZG9tYWluPScgKyBvcHRpb25zLmRvbWFpbiA6ICcnLFxuXHRcdFx0XHRvcHRpb25zLnNlY3VyZSAgPyAnOyBzZWN1cmUnIDogJydcblx0XHRcdF0uam9pbignJykpO1xuXHRcdH1cblxuXHRcdC8vIFJlYWRcblxuXHRcdHZhciByZXN1bHQgPSBrZXkgPyB1bmRlZmluZWQgOiB7fSxcblx0XHRcdC8vIFRvIHByZXZlbnQgdGhlIGZvciBsb29wIGluIHRoZSBmaXJzdCBwbGFjZSBhc3NpZ24gYW4gZW1wdHkgYXJyYXlcblx0XHRcdC8vIGluIGNhc2UgdGhlcmUgYXJlIG5vIGNvb2tpZXMgYXQgYWxsLiBBbHNvIHByZXZlbnRzIG9kZCByZXN1bHQgd2hlblxuXHRcdFx0Ly8gY2FsbGluZyAkLmNvb2tpZSgpLlxuXHRcdFx0Y29va2llcyA9IGRvY3VtZW50LmNvb2tpZSA/IGRvY3VtZW50LmNvb2tpZS5zcGxpdCgnOyAnKSA6IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gY29va2llcy5sZW5ndGg7XG5cblx0XHRmb3IgKDsgaSA8IGw7IGkrKykge1xuXHRcdFx0dmFyIHBhcnRzID0gY29va2llc1tpXS5zcGxpdCgnPScpLFxuXHRcdFx0XHRuYW1lID0gZGVjb2RlKHBhcnRzLnNoaWZ0KCkpLFxuXHRcdFx0XHRjb29raWUgPSBwYXJ0cy5qb2luKCc9Jyk7XG5cblx0XHRcdGlmIChrZXkgPT09IG5hbWUpIHtcblx0XHRcdFx0Ly8gSWYgc2Vjb25kIGFyZ3VtZW50ICh2YWx1ZSkgaXMgYSBmdW5jdGlvbiBpdCdzIGEgY29udmVydGVyLi4uXG5cdFx0XHRcdHJlc3VsdCA9IHJlYWQoY29va2llLCB2YWx1ZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQcmV2ZW50IHN0b3JpbmcgYSBjb29raWUgdGhhdCB3ZSBjb3VsZG4ndCBkZWNvZGUuXG5cdFx0XHRpZiAoIWtleSAmJiAoY29va2llID0gcmVhZChjb29raWUpKSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdHJlc3VsdFtuYW1lXSA9IGNvb2tpZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9O1xuXG5cdGNvbmZpZy5kZWZhdWx0cyA9IHt9O1xuXG5cdCQucmVtb3ZlQ29va2llID0gZnVuY3Rpb24gKGtleSwgb3B0aW9ucykge1xuXHRcdC8vIE11c3Qgbm90IGFsdGVyIG9wdGlvbnMsIHRodXMgZXh0ZW5kaW5nIGEgZnJlc2ggb2JqZWN0Li4uXG5cdFx0JC5jb29raWUoa2V5LCAnJywgJC5leHRlbmQoe30sIG9wdGlvbnMsIHsgZXhwaXJlczogLTEgfSkpO1xuXHRcdHJldHVybiAhJC5jb29raWUoa2V5KTtcblx0fTtcblxufSkpO1xuIiwiLyoqXHJcbiAqIEZpbGUgbmF2aWdhdGlvbi5qcy5cclxuICpcclxuICogSGFuZGxlcyB0b2dnbGluZyB0aGUgbmF2aWdhdGlvbiBtZW51IGZvciBzbWFsbCBzY3JlZW5zIGFuZCBlbmFibGVzIFRBQiBrZXlcclxuICogbmF2aWdhdGlvbiBzdXBwb3J0IGZvciBkcm9wZG93biBtZW51cy5cclxuICovXHJcbiggZnVuY3Rpb24oKSB7XHJcblx0dmFyIHBhZ2VCb2R5LCBjb250YWluZXIsIGJ1dHRvbiwgbWVudSwgbGlua3MsIGksIGxlbjtcclxuXHJcblx0cGFnZUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpO1xyXG5cdGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCAnc2l0ZS1uYXZpZ2F0aW9uJyApO1xyXG5cclxuXHRpZiAoICEgY29udGFpbmVyICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0YnV0dG9uID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKCAnYnV0dG9uJyApWzBdO1xyXG5cdGlmICggJ3VuZGVmaW5lZCcgPT09IHR5cGVvZiBidXR0b24gKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRtZW51ID0gY29udGFpbmVyLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoICduYXYtaW5uZXInIClbMF07XHJcblxyXG5cdC8vIEhpZGUgbWVudSB0b2dnbGUgYnV0dG9uIGlmIG1lbnUgaXMgZW1wdHkgYW5kIHJldHVybiBlYXJseS5cclxuXHRpZiAoICd1bmRlZmluZWQnID09PSB0eXBlb2YgbWVudSApIHtcclxuXHRcdGJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0bWVudS5zZXRBdHRyaWJ1dGUoICdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyApO1xyXG5cdGlmICggLTEgPT09IG1lbnUuY2xhc3NOYW1lLmluZGV4T2YoICduYXYtbWVudScgKSApIHtcclxuXHRcdG1lbnUuY2xhc3NOYW1lICs9ICcgbmF2LW1lbnUnO1xyXG5cdH1cclxuXHJcblx0YnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggLTEgIT09IGNvbnRhaW5lci5jbGFzc05hbWUuaW5kZXhPZiggJ3RvZ2dsZWQnICkgKSB7XHJcblx0XHRcdGlmKHBhZ2VCb2R5WzBdLmNsYXNzTGlzdC5jb250YWlucygnbWVudS1vcGVuJykpIHtcclxuXHRcdFx0XHRwYWdlQm9keVswXS5jbGFzc0xpc3QucmVtb3ZlKCdtZW51LW9wZW4nKTtcclxuXHRcdFx0fVxyXG5cdFx0Ly9cdHBhZ2VCb2R5LmNsYXNzTGlzdC5yZW1vdmUoJyBtZW51LW9wZW4nKTtcclxuXHRcdFx0Y29udGFpbmVyLmNsYXNzTmFtZSA9IGNvbnRhaW5lci5jbGFzc05hbWUucmVwbGFjZSggJyB0b2dnbGVkJywgJycgKTtcclxuXHRcdFx0YnV0dG9uLnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnICk7XHJcblx0XHRcdG1lbnUuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcclxuXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYWdlQm9keVswXS5jbGFzc0xpc3QuYWRkKCdtZW51LW9wZW4nKTtcclxuXHRcdFx0Y29udGFpbmVyLmNsYXNzTmFtZSArPSAnIHRvZ2dsZWQnO1xyXG5cdFx0XHRidXR0b24uc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJyApO1xyXG5cdFx0XHRtZW51LnNldEF0dHJpYnV0ZSggJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBHZXQgYWxsIHRoZSBsaW5rIGVsZW1lbnRzIHdpdGhpbiB0aGUgbWVudS5cclxuXHRsaW5rcyAgICA9IG1lbnUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoICdhJyApO1xyXG5cclxuXHQvLyBFYWNoIHRpbWUgYSBtZW51IGxpbmsgaXMgZm9jdXNlZCBvciBibHVycmVkLCB0b2dnbGUgZm9jdXMuXHJcblx0Zm9yICggaSA9IDAsIGxlbiA9IGxpbmtzLmxlbmd0aDsgaSA8IGxlbjsgaSsrICkge1xyXG5cdFx0bGlua3NbaV0uYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgdG9nZ2xlRm9jdXMsIHRydWUgKTtcclxuXHRcdGxpbmtzW2ldLmFkZEV2ZW50TGlzdGVuZXIoICdibHVyJywgdG9nZ2xlRm9jdXMsIHRydWUgKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldHMgb3IgcmVtb3ZlcyAuZm9jdXMgY2xhc3Mgb24gYW4gZWxlbWVudC5cclxuXHQgKi9cclxuXHRmdW5jdGlvbiB0b2dnbGVGb2N1cygpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHQvLyBNb3ZlIHVwIHRocm91Z2ggdGhlIGFuY2VzdG9ycyBvZiB0aGUgY3VycmVudCBsaW5rIHVudGlsIHdlIGhpdCAubmF2LW1lbnUuXHJcblx0XHR3aGlsZSAoIC0xID09PSBzZWxmLmNsYXNzTmFtZS5pbmRleE9mKCAnbmF2LW1lbnUnICkgKSB7XHJcblxyXG5cdFx0XHQvLyBPbiBsaSBlbGVtZW50cyB0b2dnbGUgdGhlIGNsYXNzIC5mb2N1cy5cclxuXHRcdFx0aWYgKCAnbGknID09PSBzZWxmLnRhZ05hbWUudG9Mb3dlckNhc2UoKSApIHtcclxuXHRcdFx0XHRpZiAoIC0xICE9PSBzZWxmLmNsYXNzTmFtZS5pbmRleE9mKCAnZm9jdXMnICkgKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsYXNzTmFtZSA9IHNlbGYuY2xhc3NOYW1lLnJlcGxhY2UoICcgZm9jdXMnLCAnJyApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsYXNzTmFtZSArPSAnIGZvY3VzJztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYgPSBzZWxmLnBhcmVudEVsZW1lbnQ7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUb2dnbGVzIGBmb2N1c2AgY2xhc3MgdG8gYWxsb3cgc3VibWVudSBhY2Nlc3Mgb24gdGFibGV0cy5cclxuXHQgKi9cclxuXHQoIGZ1bmN0aW9uKCBjb250YWluZXIgKSB7XHJcblx0XHR2YXIgdG91Y2hTdGFydEZuLCBpLFxyXG5cdFx0XHRwYXJlbnRMaW5rID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoICcubWVudS1pdGVtLWhhcy1jaGlsZHJlbiA+IGEsIC5wYWdlX2l0ZW1faGFzX2NoaWxkcmVuID4gYScgKTtcclxuXHJcblx0XHRpZiAoICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdyApIHtcclxuXHRcdFx0dG91Y2hTdGFydEZuID0gZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0dmFyIG1lbnVJdGVtID0gdGhpcy5wYXJlbnROb2RlLCBpO1xyXG5cclxuXHRcdFx0XHRpZiAoICEgbWVudUl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCAnZm9jdXMnICkgKSB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IG1lbnVJdGVtLnBhcmVudE5vZGUuY2hpbGRyZW4ubGVuZ3RoOyArK2kgKSB7XHJcblx0XHRcdFx0XHRcdGlmICggbWVudUl0ZW0gPT09IG1lbnVJdGVtLnBhcmVudE5vZGUuY2hpbGRyZW5baV0gKSB7XHJcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0bWVudUl0ZW0ucGFyZW50Tm9kZS5jaGlsZHJlbltpXS5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRtZW51SXRlbS5jbGFzc0xpc3QuYWRkKCAnZm9jdXMnICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdG1lbnVJdGVtLmNsYXNzTGlzdC5yZW1vdmUoICdmb2N1cycgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IHBhcmVudExpbmsubGVuZ3RoOyArK2kgKSB7XHJcblx0XHRcdFx0cGFyZW50TGlua1tpXS5hZGRFdmVudExpc3RlbmVyKCAndG91Y2hzdGFydCcsIHRvdWNoU3RhcnRGbiwgZmFsc2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0oIGNvbnRhaW5lciApICk7XHJcbn0gKSgpO1xyXG4iLCIvKiBzdGlja3kgTWVudVxuICAgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cblxualF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xuICAvL2lmICgkKHdpbmRvdykud2lkdGgoKSA+PSA5OTIpIHtcblxuICAgIC8vIGluaXQgc3RpY2t5IG1lbnVcbiAgICB2YXIgbGFzdFNjcm9sbFBvc2l0aW9uID0gMDtcbiAgICBjdXJyZW50U2Nyb2xsUG9zaXRpb24gPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgLy8kKFwiYm9keVwiKS5hZGRDbGFzcyhcImhhcy1zdGlja3ktbWVudVwiKTtcblxuICAgIGlmIChjdXJyZW50U2Nyb2xsUG9zaXRpb24gPiAxMjApIHtcbiAgICAgICQoXCJib2R5XCIpLmFkZENsYXNzKFwic3RpY2t5LW1lbnVcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoXCJib2R5XCIpLnJlbW92ZUNsYXNzKFwic3RpY2t5LW1lbnVcIik7XG4gICAgfVxuICAgIGxhc3RTY3JvbGxQb3NpdGlvbiA9IGN1cnJlbnRTY3JvbGxQb3NpdGlvbjtcblxuICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24gKCkge1xuICAgICAgY3VycmVudFNjcm9sbFBvc2l0aW9uID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgaWYgKGN1cnJlbnRTY3JvbGxQb3NpdGlvbiA+IDEyMCkge1xuICAgICAgICAkKFwiYm9keVwiKS5hZGRDbGFzcyhcInN0aWNreS1tZW51XCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJChcImJvZHlcIikucmVtb3ZlQ2xhc3MoXCJzdGlja3ktbWVudVwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50U2Nyb2xsUG9zaXRpb24gPiBsYXN0U2Nyb2xsUG9zaXRpb24pIHtcbiAgICAgICAgalF1ZXJ5KFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInNjcm9sbC11cFwiKTtcbiAgICAgICAgalF1ZXJ5KFwiYm9keVwiKS5hZGRDbGFzcyhcInNjcm9sbC1kb3duXCIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgalF1ZXJ5KFwiYm9keVwiKS5yZW1vdmVDbGFzcyhcInNjcm9sbC1kb3duXCIpO1xuICAgICAgICBqUXVlcnkoXCJib2R5XCIpLmFkZENsYXNzKFwic2Nyb2xsLXVwXCIpO1xuICAgICAgfVxuICAgICAgbGFzdFNjcm9sbFBvc2l0aW9uID0gY3VycmVudFNjcm9sbFBvc2l0aW9uO1xuICAgIH0pO1xuICAvL31cbiAgXG4gIC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICpcbiAgKiBFeHRyYS1jb25mIGZvciBvbmVwYWdlc1xuICAqXG4gICogKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cbi8qICBqUXVlcnkoXCIubWVudS1pdGVtIGFcIikuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdmFyIG1lbnVJdGVtID0galF1ZXJ5KHRoaXMpLmF0dHIoJ2hyZWYnKTtcblxuICAgICAgalF1ZXJ5KCcubWFpbi1uYXZpZ2F0aW9uJykucmVtb3ZlQ2xhc3MoJ3RvZ2dsZWQnKTtcbiAgICAgIGpRdWVyeSgnYm9keScpLnJlbW92ZUNsYXNzKCdtZW51LXRvZ2dsZWQnKTtcblxuICAgICAgalF1ZXJ5KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldKS5hbmltYXRlKHtcbiAgICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShtZW51SXRlbSkub2Zmc2V0KCkudG9wLTEwMFxuICAgICAgfSwgODAwKS5kZWxheSgyMDApO1xuICB9KTsqL1xufSk7IiwiLyoqXHJcbiAqIEZpbGUgc2tpcC1saW5rLWZvY3VzLWZpeC5qcy5cclxuICpcclxuICogSGVscHMgd2l0aCBhY2Nlc3NpYmlsaXR5IGZvciBrZXlib2FyZCBvbmx5IHVzZXJzLlxyXG4gKlxyXG4gKiBMZWFybiBtb3JlOiBodHRwczovL2dpdC5pby92V2RyMlxyXG4gKi9cclxuKCBmdW5jdGlvbigpIHtcclxuXHR2YXIgaXNJZSA9IC8odHJpZGVudHxtc2llKS9pLnRlc3QoIG5hdmlnYXRvci51c2VyQWdlbnQgKTtcclxuXHJcblx0aWYgKCBpc0llICYmIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkICYmIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICkge1xyXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoICdoYXNoY2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBpZCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICksXHJcblx0XHRcdFx0ZWxlbWVudDtcclxuXHJcblx0XHRcdGlmICggISAoIC9eW0EtejAtOV8tXSskLy50ZXN0KCBpZCApICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRlbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XHJcblxyXG5cdFx0XHRpZiAoIGVsZW1lbnQgKSB7XHJcblx0XHRcdFx0aWYgKCAhICggL14oPzphfHNlbGVjdHxpbnB1dHxidXR0b258dGV4dGFyZWEpJC9pLnRlc3QoIGVsZW1lbnQudGFnTmFtZSApICkgKSB7XHJcblx0XHRcdFx0XHRlbGVtZW50LnRhYkluZGV4ID0gLTE7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRlbGVtZW50LmZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sIGZhbHNlICk7XHJcblx0fVxyXG59ICkoKTtcclxuIiwialF1ZXJ5KGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoJCkge1xyXG5cclxuICAvLyBqUXVlcnkoXCIuc2xpZGVyLWhlcm9cIikub3dsQ2Fyb3VzZWwoe1xyXG4gIC8vICAgbG9vcDogdHJ1ZSxcclxuICAvLyAgIG5hdjogdHJ1ZSxcclxuICAvLyAgIGRvdHM6IGZhbHNlLFxyXG4gIC8vICAgYXV0b3BsYXk6IHRydWUsXHJcbiAgLy8gICBtb3VzZURyYWc6IHRydWUsXHJcbiAgLy8gICB0b3VjaERyYWc6IHRydWUsXHJcbiAgLy8gICBpdGVtczogMSxcclxuICAvLyB9KTtcclxuXHJcblx0LypqUXVlcnkoXCIuc2xpZGVyLWFjdGl2aXRpZXNcIikub3dsQ2Fyb3VzZWwoe1xyXG5cdFx0bG9vcDogZmFsc2UsXHJcblx0XHRuYXY6IHRydWUsXHJcblx0XHRkb3RzOiBmYWxzZSxcclxuXHRcdGF1dG9wbGF5OiBmYWxzZSxcclxuXHRcdG1vdXNlRHJhZzogdHJ1ZSxcclxuXHRcdHRvdWNoRHJhZzogdHJ1ZSxcclxuXHRcdHJlc3BvbnNpdmUgOiB7XHJcblx0XHQgICAgMCA6IHtcclxuXHRcdCAgICAgICAgaXRlbXM6IDEsXHJcblx0XHQgICAgfSxcclxuXHRcdCAgICA3NjggOiB7XHJcblx0XHQgICAgICAgIGl0ZW1zOiAyLFxyXG5cdFx0ICAgIH0sXHJcblx0XHQgICAgOTkyIDoge1xyXG5cdFx0ICAgICAgICBpdGVtczogMyxcclxuXHRcdCAgICB9LFxyXG5cdFx0ICAgICAxMjAwIDoge1xyXG5cdFx0ICAgIFx0aXRlbXM6IDQsXHJcblx0XHQgICAgfVxyXG5cdFx0fVxyXG5cdH0pOyovXHJcblxyXG5cdGlmIChsb2NhdGlvbi5oYXNoKSBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaGFzaDtcclxuXHJcblx0aWYgKGpRdWVyeS5jb29raWUoJ2hpZGVjb29raWUnKSAhPSBcImhpZGRlblwiICkge1xyXG5cdFx0JCgnI2Nvb2tpZWJhbm5lcicpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHR9XHJcblxyXG5cdGlmIChqUXVlcnkuY29va2llKCdoaWRlcG9wdXAnKSAhPSBcImhpZGRlblwiICkge1xyXG5cdFx0JCgnI3BvcHVwJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG5cdH1cclxuXHRcclxuXHQkKCcjY29va2llYmFubmVyIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgIHZhciBkYXRlID0gbmV3IERhdGUoKTtcclxuICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKygzNjAqMjQqNjAqNjAqMTAwMCkpO1xyXG4gICAgICBkb2N1bWVudC5jb29raWUgPSBcImhpZGVjb29raWVcIiArIFwiPVwiICsgXCJoaWRkZW5cIiArIFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b0dNVFN0cmluZygpO1xyXG5cclxuICAgICAgJCgnI2Nvb2tpZWJhbm5lcicpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuXHR9KTtcclxuXHRcclxuXHJcbn0pXHJcblxyXG5qUXVlcnkoXCIubWVudS1hbmNob3IgYVwiKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB2YXIgbWVudUl0ZW0gPSBqUXVlcnkodGhpcykuYXR0cignaHJlZicpO1xyXG5cclxuICAgIGpRdWVyeSgnI3NpdGUtbmF2aWdhdGlvbicpLnJlbW92ZUNsYXNzKCd0b2dnbGVkJyk7XHJcbiAgICBqUXVlcnkoJ2JvZHknKS5yZW1vdmVDbGFzcygnbWVudS10b2dnbGVkJyk7XHJcblxyXG4gICAgalF1ZXJ5KFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldKS5hbmltYXRlKHtcclxuICAgICAgICBzY3JvbGxUb3A6IGpRdWVyeShtZW51SXRlbSkub2Zmc2V0KCkudG9wXHJcbiAgICB9LCA1MDApLmRlbGF5KDIwMCk7XHJcbn0pO1xyXG5cclxualF1ZXJ5KFwiLmNoZWNrLXJlc2VydmF0aW9uXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGpRdWVyeShcIiNjaGVjay1yZXNlcnZhdGlvblwiKS5wcm9wKCBcImNoZWNrZWRcIiwgdHJ1ZSApO1xyXG4gICAgalF1ZXJ5KFwiI2NoZWNrLW1lc3NhZ2VcIikucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcbiAgICBqUXVlcnkoJy5mb3JtLWZpZWxkLnlvdXItcmVzZXJ2YXRpb24nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbn0pO1xyXG5cclxualF1ZXJ5KFwiLmNoZWNrLW1lc3NhZ2VcIikuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgalF1ZXJ5KFwiI2NoZWNrLXJlc2VydmF0aW9uXCIpLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG4gICAgalF1ZXJ5KFwiI2NoZWNrLW1lc3NhZ2VcIikucHJvcCggXCJjaGVja2VkXCIsIHRydWUgKTtcclxuICAgIGpRdWVyeSgnLmZvcm0tZmllbGQueW91ci1yZXNlcnZhdGlvbicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxufSk7Il0sImZpbGUiOiJzY3JpcHRzLW1pbi5qcyJ9
